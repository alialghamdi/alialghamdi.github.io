(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{122:function(t,e,s){t.exports=s.p+"assets/img/solr3.ce89a8c9.png"},245:function(t,e,s){t.exports=s.p+"assets/img/solr1.942df5b6.png"},246:function(t,e,s){t.exports=s.p+"assets/img/solr2.632259f2.png"},247:function(t,e,s){t.exports=s.p+"assets/img/solr9.abf1881e.png"},248:function(t,e,s){t.exports=s.p+"assets/img/solr4.2987db8a.png"},249:function(t,e,s){t.exports=s.p+"assets/img/solr5.e9d69f40.png"},250:function(t,e,s){t.exports=s.p+"assets/img/solr6.b30523b6.png"},251:function(t,e,s){t.exports=s.p+"assets/img/solr7.61705014.png"},252:function(t,e,s){t.exports=s.p+"assets/img/solr8.27288081.png"},253:function(t,e,s){t.exports=s.p+"assets/img/solr10.12a71caf.png"},272:function(t,e,s){"use strict";s.r(e);var a=s(0),o=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"lab-5-stream-logs-and-visualize-monitoring"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lab-5-stream-logs-and-visualize-monitoring"}},[t._v("#")]),t._v(" Lab 5: Stream Logs and Visualize Monitoring")]),t._v(" "),a("p",[a("strong",[t._v("Objective:")])]),t._v(" "),a("p",[t._v("To use SOLR, HUE, FLUME, HDFS and YARN to process web server logs and build a dashboard for monitoring.")]),t._v(" "),a("p",[a("strong",[t._v("Successful Outcome:")])]),t._v(" "),a("ol",[a("li",[t._v("Create a data stream of logs through FLUME.")]),t._v(" "),a("li",[t._v("Develop a dashboard with charts with HUE for monitoring.")])]),t._v(" "),a("p",[t._v("In this exercise, a company wants to see and search the user behavior through their access and calls immediately and in real-time. We will build a streamer, search agent and dashboards.")]),t._v(" "),a("p",[t._v("Logs are semi-structured, although it's not logically simple to seperate them. But they in the end have identifiers that you can use.")]),t._v(" "),a("p",[t._v("We will start this exercise by using SOLR to index our logs for search and monitoring.")]),t._v(" "),a("h2",{attrs:{id:"creating-our-search-index"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#creating-our-search-index"}},[t._v("#")]),t._v(" Creating our search index")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Upload your configuration:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("cd /opt/examples/flume\nsolrctl --zk quickstart.cloudera:2181/solr instancedir --create live_logs ./solr_configs\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Create a Solr collection using this command:")]),t._v(" "),a("p",[a("code",[t._v("solrctl --zk quickstart.cloudera:2181/solr collection --create live_logs -s 1")])])]),t._v(" "),a("li",[a("p",[t._v("When we access HUE UI and click on the hamburger menu and choose Indexes, we should see the collection we created:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(245),alt:"S1"}})])])]),t._v(" "),a("h2",{attrs:{id:"let-s-stream-some-logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#let-s-stream-some-logs"}},[t._v("#")]),t._v(" Let's stream some logs")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("We will utilize Flume now to stream the logs. Starting the Flume agent will feed the data to the collection, running this command will start it:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("flume-ng agent \\\n    --conf /opt/examples/flume/conf \\\n    --conf-file /opt/examples/flume/conf/flume.conf \\\n    --name agent1 \\\n    -Dflume.root.logger=DEBUG,INFO,console\n")])])])]),t._v(" "),a("li",[a("p",[t._v("From the command line, let's feed flume the logs if it hasn't started yet with running:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("sh /opt/gen_logs/start_logs.sh\n")])])])]),t._v(" "),a("li",[a("p",[t._v("From the collection in HUE UI, let's start searching:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(246),alt:"S2"}})])]),t._v(" "),a("li",[a("p",[t._v("Just accessing the search will show us a lot of information that we can play with:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(122),alt:"S3"}})])])]),t._v(" "),a("h2",{attrs:{id:"let-s-build-a-dashboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#let-s-build-a-dashboard"}},[t._v("#")]),t._v(" Let's build a dashboard")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Click on Dashboard, and choose the left layout as in the picture:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(247),alt:"S9"}})])]),t._v(" "),a("li",[a("p",[t._v("If it's not already clicked (dimmed black) then from the search page, let's click on the edit icon:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(122),alt:"S3"}})])]),t._v(" "),a("li",[a("p",[t._v("We are going to create a bar chart, so starting with dragging the icon to the gray area right below it:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(248),alt:"S4"}})])]),t._v(" "),a("li",[a("p",[t._v("This will bring up the list of fields that are present in our index so that you can choose which field you would like to group by. Let's choose "),a("code",[t._v("request_date")]),t._v(":")]),t._v(" "),a("p",[a("img",{attrs:{src:s(249),alt:"S5"}})])]),t._v(" "),a("li",[a("p",[t._v("To show a better result let's show just the last 5 minutes result and refresh every 30 seconds. Click on the date icon like in the picture:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(250),alt:"S6"}})]),t._v(" "),a("p",[a("img",{attrs:{src:s(251),alt:"S7"}})])]),t._v(" "),a("li",[a("p",[t._v("Let's minimize the menu on the left so we get the chance to explore more:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(252),alt:"S8"}})])]),t._v(" "),a("li",[a("p",[t._v("Let's add a pie chart of departments, so drag the pie chart icon to the left column and choose department from top. It should look like this:")]),t._v(" "),a("p",[a("img",{attrs:{src:s(253),alt:"S10"}})])]),t._v(" "),a("li",[a("p",[t._v("Now every 30 seconds the charts will update you and you'll have more information about the requests.")])])])])}),[],!1,null,null,null);e.default=o.exports}}]);