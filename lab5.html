<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lab 5: Stream Logs and Visualize Monitoring | Welcome to Intro to Big Data</title>
    <meta name="description" content="Very simple tutorials for Big Data">
    
    
    <link rel="preload" href="/assets/css/0.styles.7f4071b7.css" as="style"><link rel="preload" href="/assets/js/app.9bea2965.js" as="script"><link rel="preload" href="/assets/js/2.37eece0d.js" as="script"><link rel="preload" href="/assets/js/5.6eb9535c.js" as="script"><link rel="prefetch" href="/assets/js/10.d7e311cb.js"><link rel="prefetch" href="/assets/js/11.47ba2160.js"><link rel="prefetch" href="/assets/js/3.e63ba4cb.js"><link rel="prefetch" href="/assets/js/4.b15ff3a5.js"><link rel="prefetch" href="/assets/js/6.0c1684b0.js"><link rel="prefetch" href="/assets/js/7.c0592412.js"><link rel="prefetch" href="/assets/js/8.b9a5f612.js"><link rel="prefetch" href="/assets/js/9.c43961b5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7f4071b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-navbar"><!----> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Intro to Big Data</a></li><li><a href="/lab1.html" class="sidebar-link">Lab 1: Setting up the environment</a></li><li><a href="/lab2.html" class="sidebar-link">Lab 2: Quick introduction to HDFS</a></li><li><a href="/lab3.html" class="sidebar-link">Lab 3: Quick introduction to YARN</a></li><li><a href="/lab4.html" class="sidebar-link">Lab 4: Twitter tweets sentiment analysis</a></li><li><a href="/lab5.html" class="active sidebar-link">Lab 5: Stream Logs and Visualize Monitoring</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lab5.html#creating-our-search-index" class="sidebar-link">Creating our search index</a></li><li class="sidebar-sub-header"><a href="/lab5.html#let-s-stream-some-logs" class="sidebar-link">Let's stream some logs</a></li><li class="sidebar-sub-header"><a href="/lab5.html#let-s-build-a-dashboard" class="sidebar-link">Let's build a dashboard</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lab-5-stream-logs-and-visualize-monitoring"><a href="#lab-5-stream-logs-and-visualize-monitoring" class="header-anchor">#</a> Lab 5: Stream Logs and Visualize Monitoring</h1> <p><strong>Objective:</strong></p> <p>To use SOLR, HUE, FLUME, HDFS and YARN to process web server logs and build a dashboard for monitoring.</p> <p><strong>Successful Outcome:</strong></p> <ol><li>Create a data stream of logs through FLUME.</li> <li>Develop a dashboard with charts with HUE for monitoring.</li></ol> <p>In this exercise, a company wants to see and search the user behavior through their access and calls immediately and in real-time. We will build a streamer, search agent and dashboards.</p> <p>Logs are semi-structured, although it's not logically simple to seperate them. But they in the end have identifiers that you can use.</p> <p>We will start this exercise by using SOLR to index our logs for search and monitoring.</p> <h2 id="creating-our-search-index"><a href="#creating-our-search-index" class="header-anchor">#</a> Creating our search index</h2> <ol><li><p>Upload your configuration:</p> <div class="language- extra-class"><pre class="language-text"><code>cd /opt/examples/flume
solrctl --zk quickstart.cloudera:2181/solr instancedir --create live_logs ./solr_configs
</code></pre></div></li> <li><p>Create a Solr collection using this command:</p> <p><code>solrctl --zk quickstart.cloudera:2181/solr collection --create live_logs -s 1</code></p></li> <li><p>When we access HUE UI and click on the hamburger menu and choose Indexes, we should see the collection we created:</p> <p><img src="/assets/img/solr1.942df5b6.png" alt="S1"></p></li></ol> <h2 id="let-s-stream-some-logs"><a href="#let-s-stream-some-logs" class="header-anchor">#</a> Let's stream some logs</h2> <ol><li><p>We will utilize Flume now to stream the logs. Starting the Flume agent will feed the data to the collection, running this command will start it:</p> <div class="language- extra-class"><pre class="language-text"><code>flume-ng agent \
    --conf /opt/examples/flume/conf \
    --conf-file /opt/examples/flume/conf/flume.conf \
    --name agent1 \
    -Dflume.root.logger=DEBUG,INFO,console
</code></pre></div></li> <li><p>From the command line, let's feed flume the logs if it hasn't started yet with running:</p> <div class="language- extra-class"><pre class="language-text"><code>sh /opt/gen_logs/start_logs.sh
</code></pre></div></li> <li><p>From the collection in HUE UI, let's start searching:</p> <p><img src="/assets/img/solr2.632259f2.png" alt="S2"></p></li> <li><p>Just accessing the search will show us a lot of information that we can play with:</p> <p><img src="/assets/img/solr3.ce89a8c9.png" alt="S3"></p></li></ol> <h2 id="let-s-build-a-dashboard"><a href="#let-s-build-a-dashboard" class="header-anchor">#</a> Let's build a dashboard</h2> <ol><li><p>Click on Dashboard, and choose the left layout as in the picture:</p> <p><img src="/assets/img/solr9.abf1881e.png" alt="S9"></p></li> <li><p>If it's not already clicked (dimmed black) then from the search page, let's click on the edit icon:</p> <p><img src="/assets/img/solr3.ce89a8c9.png" alt="S3"></p></li> <li><p>We are going to create a bar chart, so starting with dragging the icon to the gray area right below it:</p> <p><img src="/assets/img/solr4.2987db8a.png" alt="S4"></p></li> <li><p>This will bring up the list of fields that are present in our index so that you can choose which field you would like to group by. Let's choose <code>request_date</code>:</p> <p><img src="/assets/img/solr5.e9d69f40.png" alt="S5"></p></li> <li><p>To show a better result let's show just the last 5 minutes result and refresh every 30 seconds. Click on the date icon like in the picture:</p> <p><img src="/assets/img/solr6.b30523b6.png" alt="S6"></p> <p><img src="/assets/img/solr7.61705014.png" alt="S7"></p></li> <li><p>Let's minimize the menu on the left so we get the chance to explore more:</p> <p><img src="/assets/img/solr8.27288081.png" alt="S8"></p></li> <li><p>Let's add a pie chart of departments, so drag the pie chart icon to the left column and choose department from top. It should look like this:</p> <p><img src="/assets/img/solr10.12a71caf.png" alt="S10"></p></li> <li><p>Now every 30 seconds the charts will update you and you'll have more information about the requests.</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/lab4.html" class="prev">Lab 4: Twitter tweets sentiment analysis</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.9bea2965.js" defer></script><script src="/assets/js/2.37eece0d.js" defer></script><script src="/assets/js/5.6eb9535c.js" defer></script>
  </body>
</html>
